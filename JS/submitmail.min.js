$(document).ready(function(){var b=false;if(docCookies.getItem("numbertimes")===null){docCookies.setItem("numbertimes",1,86400,"/")}if(docCookies.getItem("seconds")===null){docCookies.setItem("seconds",600,86400,"/")}var c;function a(){if(docCookies.getItem("timesent")===null){docCookies.setItem("timesent",Math.round(((new Date()).getTime()/1000)+(60*60)+parseInt(docCookies.getItem("seconds"),10)),86400,"/")}if(docCookies.getItem("numbersent")===null){docCookies.setItem("numbersent",0,86400,"/")}setInterval(function(){var h=parseInt(docCookies.getItem("timesent"),10);var g=h-Math.round(((new Date()).getTime()/1000)+(60*60));var e=Math.floor(g/60);var d=g-(e*60);c=e+":"+d;$("#time").html(c);$("#minute").html((parseInt(docCookies.getItem("seconds"),10)/60));if((e===0&&d===0)||(e<0)){if(b===true){$(".errormessage").fadeOut("slow");var f=parseInt(docCookies.getItem("numbertimes"),10);f++;var i=parseInt(docCookies.getItem("seconds"),10);i*=f;docCookies.setItem("timesent",Math.round(((new Date()).getTime()/1000)+(60*60)+i),86400,"/");docCookies.setItem("numbertimes",f,86400,"/");docCookies.setItem("seconds",i,86400,"/");docCookies.setItem("numbersent",0,86400,"/");b=false}else{$(".errormessage").fadeOut("slow");docCookies.setItem("numbersent",0,86400,"/");docCookies.setItem("timesent",Math.round(((new Date()).getTime()/1000)+(60*60)+(parseInt(docCookies.getItem("seconds"),10))),86400,"/")}}},1000)}$("#sendmessage").click(function(){var d=$('input[name="number"]').val();var e=new RegExp(/\./g);$("this").css({"background-color":"#8080ff",color:"white"});if($('input[name="firstname"]').val()===""){$('input[name="firstname"]').get(0).setCustomValidity("Please input your first name")}else{if($('input[name="firstname"]').val().length<2){$('input[name="firstname"]').get(0).setCustomValidity("Please input a name with 2 characters or more")}else{if($('input[name="firstname"]').val().length>150){$('input[name="firstname"]').get(0).setCustomValidity("Please input a name with less than 150 characters")}else{$('input[name="firstname"]').get(0).setCustomValidity("")}}}if($('input[name="lastname"]').val()===""){$('input[name="lastname"]').get(0).setCustomValidity("Please input your last name")}else{if($('input[name="lastname"]').val().length<2){$('input[name="lastname"]').get(0).setCustomValidity("Please input a name with 2 characters or more")}else{if($('input[name="lastname"]').val().length>150){$('input[name="lastname"]').get(0).setCustomValidity("Please input a name with less than 150 characters")}else{$('input[name="lastname"]').get(0).setCustomValidity("")}}}if($('input[name="email"]').val()===""){$('input[name="email"]').get(0).setCustomValidity("Please put in your email")}else{if($('input[name="email"]').val().length<5){$('input[name="email"]').get(0).setCustomValidity("Please put in a valid email")}else{if($('input[name="email"]').val().length>150){$('input[name="email"]').get(0).setCustomValidity("Please input a valid email")}else{$('input[name="email"]').get(0).setCustomValidity("")}}}if(isNaN($('input[name="number"]').val())){$('input[name="number"]').get(0).setCustomValidity("Please input a valid phone number")}else{if($('input[name="number"]').val().length!==11){$('input[name="number"]').get(0).setCustomValidity("Please put in an 11 digit phone number")}else{if(e.test(d)){$('input[name="number"]').get(0).setCustomValidity("Please input a valid phone number")}else{$('input[name="number"]').get(0).setCustomValidity("")}}}if($('textarea[name="message"]').val().length<15){$('textarea[name="message"]').get(0).setCustomValidity("Please put in a message more than 15 characters")}else{if($('textarea[name="message"]').val().length>1500){$('textarea[name="message"]').get(0).setCustomValidity("Please put in a message with less than 1500 characters")}else{$('textarea[name="message"]').get(0).setCustomValidity("")}}});$("#contactform").submit(function(e){e.preventDefault();a();var i=(10*Math.floor(10*Math.random()))+(10*Math.floor(Math.random()))+(Math.ceil(12*Math.random()))+8+12+(10*Math.floor(Math.random()))+10+19;var j=$('input[name="firstname"]').val().trim();var k=$('input[name="lastname"]').val().trim();var l=$('input[name="email"]').val().trim();var h=$('input[name="number"]').val().trim();var n=$('textarea[name="message"]').val().trim();var g=parseInt($("div#hidden").attr("data-valueey"),10);var f=new RegExp("imperial");var m=window.location;var d;if(f.test(m)){d="../Controller/submitmail.php"}else{d="Controller/submitmail.php"}g+=i;if(docCookies.getItem("numbersent")>=10){$(".errormessage").fadeIn("slow").html('You can\'t send more than 10 messages within <span id="minute"></span> minutes. Time left <span id="time"></span><span class="float-right pointer">&#10006;</span>');b=true}else{$.ajax({type:"POST",url:d,data:{firstname:j,lastname:k,email:l,number:h,message:n,token:g,salt:i},beforeSend:function(){$("#sendmessage").hide();$("#messageloader").show()},success:function(r){var p=new RegExp("Error:");var o=new RegExp("Success:");if(p.test(r)){$("#messageloader").hide();$("#sendmessage").show();$(".errormessage").fadeIn("slow").html(r.replace("Error:","")+'<span class="float-right pointer">&#10006;</span>')}if(o.test(r)){var q=docCookies.getItem("numbersent");q++;docCookies.setItem("numbersent",q,86400,"/");$("#messageloader").hide();$("#sendmessage").show();$(".successmessage").fadeIn("slow").html(r.replace("Success:","")+'<span class="float-right pointer">&#10006;</span>')}},error:function(){$("#messageloader").hide();$("#sendmessage").show();alert("An unexpected error occured. Please try again")}})}})});